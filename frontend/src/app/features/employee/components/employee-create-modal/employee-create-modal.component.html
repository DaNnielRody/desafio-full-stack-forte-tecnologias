<div class="modal-backdrop" (click)="closeRequest.emit()"></div>

<div class="modal">
  <div class="modal-header">
    <h3>{{ 'EMPLOYEE.NEW_TITLE' | translate }}</h3>
    <button class="close-btn" type="button" (click)="closeRequest.emit()">×</button>
  </div>

  <div class="modal-body">
    <form [formGroup]="createForm" (ngSubmit)="save()">
      
      <!-- Nome -->
      <div class="form-group">
        <label for="emp-name">{{ 'EMPLOYEE.NAME' | translate }}</label>
        <input
          id="emp-name"
          type="text"
          formControlName="name"
          [placeholder]="'EMPLOYEE.NAME_PLACEHOLDER' | translate"
          [class.invalid]="createForm.get('name')?.invalid && createForm.get('name')?.touched"
        />
        <small *ngIf="createForm.get('name')?.hasError('required') && createForm.get('name')?.touched" class="error">
          {{ 'EMPLOYEE.NAME_REQUIRED' | translate }}
        </small>
        <small *ngIf="createForm.get('name')?.hasError('minlength') && createForm.get('name')?.touched" class="error">
          {{ 'EMPLOYEE.NAME_MINLENGTH' | translate }}
        </small>
      </div>

      <!-- Email -->
      <div class="form-group">
        <label for="emp-email">{{ 'EMPLOYEE.EMAIL' | translate }}</label>
        <input
          id="emp-email"
          type="email"
          formControlName="email"
          [placeholder]="'EMPLOYEE.EMAIL_PLACEHOLDER' | translate"
          [class.invalid]="createForm.get('email')?.invalid && createForm.get('email')?.touched"
        />
        <small *ngIf="createForm.get('email')?.hasError('required') && createForm.get('email')?.touched" class="error">
          {{ 'EMPLOYEE.EMAIL_REQUIRED' | translate }}
        </small>
        <small *ngIf="createForm.get('email')?.hasError('email') && createForm.get('email')?.touched" class="error">
          {{ 'EMPLOYEE.EMAIL_INVALID' | translate }}
        </small>
      </div>

      <!-- CPF -->
      <div class="form-group">
        <label for="emp-cpf">{{ 'EMPLOYEE.CPF' | translate }}</label>
        <input
          id="emp-cpf"
          type="text"
          formControlName="cpf"
          appCpfMask
          [placeholder]="'EMPLOYEE.CPF_PLACEHOLDER' | translate"
          [class.invalid]="createForm.get('cpf')?.invalid && createForm.get('cpf')?.touched"
        />
        <small *ngIf="createForm.get('cpf')?.hasError('required') && createForm.get('cpf')?.touched" class="error">
          {{ 'EMPLOYEE.CPF_REQUIRED' | translate }}
        </small>
      </div>

      <!-- Botões -->
      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="closeRequest.emit()">
          {{ 'EMPLOYEE.CANCEL' | translate }}
        </button>
        <button type="submit" [disabled]="createForm.invalid">
          {{ 'EMPLOYEE.SAVE' | translate }}
        </button>
      </div>
    </form>
  </div>
</div>